<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html;
           charset=utf-8" />
    <title>BeEngineer</title>

    <style type="text/css">
    body {
        text-align: center;
    }
    #novelDiv {
        width: 800px;
        height: 450px;
        border: 1px solid black;
        margin-left: auto;
        margin-right: auto;
        position: relative;
        text-align: center;
    }

    #dialogDiv {
        font-family: "Deja Vu Sans", Helvetica, Arial, sans-serif;
        font-size: 20px;
        margin-left: auto;
        margin-right: auto;
        width: 790px;
        height: 141px;
        border: 1px solid black;
        border-top: none;
        background-color: #3d372c;
        color: white;
        top: 450px;
        left: 0;
        padding: 5px;
        text-align: left;
    }   

    .menuItem {
        width: 75%;
        margin: 0.5em auto;
        padding: 0.5em 3em;
        background-color: #0050a0;
        -moz-border-radius: 15px;
        border-radius: 15px;
        text-align: center;
        color: white;
        font-family: "Deja Vu Sans", Helvetica, Arial, sans-serif;
        font-size: 18px;
    }

    div.menuItem:hover {
        background-color: #00a0ff;
    }
    </style>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="JS/jquery.min.js"></script>
    <script type="text/javascript" src="JS/js-vine.js"></script>
    <script type="text/javascript">

    var nome;
    var curso;
    var email;
    var codigo_prof;

    // <![CDATA[
    imgPath = "img/";
    var preload = [
        "chefe.png", "chefe_feliz.png", "chefe_feliz2.png",
        "chefe_nervoso.png", "cliente.png", "cliente_feliz.png",
        "personagem.png", "personagem_nervoso.png", "personagem_pensando.png",
        "personagem_sorrindo.png", "wheat.png","escritorio.jpg","casodeuso.jpg",
        "descricao_projeto.png", "requisitos_errado.png", "casodeusocerto.jpg",
        "casodeusoerrado1.jpg","casodeusoerrado2.jpg", "casodeusoerrado3.jpg",
        "docescolha.png"
    ];

    var preloadObj = new Array(preload.length);
    for (var i = 0; i < preload.length; i++)
    {
        preloadObj[i] = new Image();
        preloadObj[i].src = imgPath + preload[i];
    }

    var personagem;
    var chefe;
    var cliente;
    var narrator;
    var leftSide;
    var rightSide;
    var upperCenter;
    var pontos_requisitos = 0,pontos_projeto = 0, pontos_implementacao = 0,pontos_teste = 0,pontos_manutencao = 0 ;
    var p;

    function prepareNovel()
    {
        novel.imagePath = "img/";
        novel.audioPath = "music/"; // path to your audio directory
    	
        personagem = new Character("Steven Gates", {color: "rgb(255, 4, 0)"});
        chefe = new Character("Mark Jobs", {color: "rgb(10, 4, 230)"});
        outro = new Character("Arnold Page", {color: "rgb(0, 255, 255)"});
        photo = new Character("", {position: upperCenter});
    	narrator = new Character('');
        leftSide = new Position(0, 1, 0, 1);
        rightSide = new Position(800, 450, 1, 1);
        upperCenter = new Position(0.5, 1, 0.5, 1);
        rightTop = new Position(0.9, 0.1, 1, 0);

        script = [ 

    		label, "start",
            /*ifStatement, "'parte2' == p ",
                jump, "parte2",
            elsePart, "'parte3' == p ",
                jump, "parte3",
            endIf, "",*/
    		scene, "escritorio.jpg",
            personagem, {image: "personagem_sorrindo.png", position:upperCenter},
            narrator, "Você é um desenvolvedor que está em uma das mais novas Startups a Tortus, e será um dos responsáveis pelo desenvolvimento do sistema de uma Rotisseria, do mais novo cliente.",
            
            scene, "escritorio.jpg",
            chefe, {image: "chefe.png", position:leftSide},
            chefe, "Steven Gates você é o responsável pelo desenvolvimento do projeto e terá que cumprir com os prazos.",
            personagem, {image: "personagem.png", position:rightSide},
            personagem , "Okay!",
            jump, "descricao_projeto",

            label,"descricao_projeto",
            jsCall, {fcn:salvaStatus, params:['descricao_projeto']},
            scene,"descricao_projeto.png",
            narrator,"Análise a descrição, quando estiver certeza que pode continuar, continue",
            jump,"pergunta1",

            label, "pergunta1",
            jsCall, {fcn:salvaStatus, params:['pergunta1']},
            scene, "escritorio.jpg",
            personagem, {image: "personagem.png", position:rightSide},
            personagem , "Precisamos cumprir com os prazos, por isso vamos iniciar o levantamento de requisitos, temos que seguir a descrição do projeto.",
            outro, {image: "cliente.png", position: leftSide},
            outro, "Tudo bem, ja irei botar a mão na massa.",
            scene,"escritorio.jpg",
            narrator, "Após algum tempo, vocês terminaram o documento de requisitos, faltando apenas você revisar e validar para partir para o próximo passo do desenvolvimento",
            scene, "requisitos_errado.png",
            narrator,"Análise atentamente os requisitos.",
            scene,"escritorio.jpg",
            menu, [
                "Os requisitos estão corretos? Se não quais das opções está correta?",
                "Sim, os requisitos estão corretos", [ setVars, { perg1: "resp1" },
                    jump, "diagramaCasoDeUso"],
                "Passar de 1 ao 4 de requisitos funcionais para nao funcionais", [ setVars, { perg1: "resp2" },
                    jump, "diagramaCasoDeUso"],
                "Passar de 1 ao 4 de requisitos funcionais para nao funcionais e 4 e 5 de não funcionais para funcionais", [ setVars, { perg1: "resp3" },
                    jump, "diagramaCasoDeUso"],
                "Passar de 5 e 6 de requisitos funcionais para nao funcionais e do 2 ao 5 de não funcionais para funcionais", [ setVars, { perg1: "resp4" },
                    jump, "diagramaCasoDeUso"],     
            ],

            label, "diagramaCasoDeUso",
            jsCall, {fcn:contabiliza, params:['perg1',"novel.userVar.perg1"]},
            jsCall, {fcn:salvaStatus, params:['diagramaCasoDeUso']},
            scene, "escritorio.jpg",
            personagem,{image: "personagem_sorrindo.png", position:rightSide},
            outro,{image: "cliente.png", position: leftSide},
            personagem, "Os requisitos estão certos, agora precisamos fazer a modelagem do Diagrama de Caso de Uso",
            outro, "Tudo Bem, podemos começar agora a modelagem",
            personagem, {image: "personagem.png", position: rightSide},
            personagem, "Muito bem, vamos começar",
            scene,{image: "escritorio.jpg", effect: "fade"},
            narrator, "Horas depois...",
            personagem, {image:"personagem_sorrindo.png", position: rightSide},
            outro,{image:"cliente_feliz.png", position: leftSide},
            personagem, "Nem percebi o tempo passar...",
            outro, "Eu também, e veja só a bagunça que deixamos",
            personagem, {image:"personagem.png", position: rightSide},
            outro,{image:"cliente.png", position: leftSide},
            personagem, "Pois bem, vamos separar os Diagramas e decidir ver qual está correto",
            jump, "pergunta2",

            label, "pergunta2",
            jsCall, {fcn:salvaStatus, params:['pergunta2']},
            scene,{image: "escritorio.jpg", effect: "dissolve"}, 
            narrator,"A seguir você verá 4 diagrama em sequencia e cabe a você definir qual deles está correto para a continuação do desenvolvimento!",
            scene, "casodeusoerrado1.jpg",
            narrator, "Diagrama nº1. Análise bem e passe para o próximo",
            scene, "casodeusoerrado3.jpg",
            narrator, "Diagrama nº2. Análise bem e passe para o próximo",
            scene, "casodeusocerto.jpg",
            narrator, "Diagrama nº3. Análise bem e passe para o próximo",
            scene, "casodeusoerrado2.jpg",
            narrator, "Diagrama nº4. Análise bem.",
            scene,"escritorio.jpg",
            narrator, "Agora que você analisou todos os Diagramas, responda a pergunta.",
            menu, [
                "Com base no documento de Requisitos, qual é o Diagrama que esta correto?",
                "Diagrama 1", [ setVars, { perg2: "resp1" },
                    jump, "inicioDesenvolvimento"],
                "Diagrama 2", [ setVars, { perg2: "resp2" },
                    jump, "inicioDesenvolvimento"],
                "Diagrama 3", [ setVars, { perg2: "resp3" },
                    jump, "inicioDesenvolvimento"],
                "Diagrama 4", [ setVars, { perg2: "resp4" },
                    jump, "inicioDesenvolvimento"],     
            ],

            label, "inicioDesenvolvimento",
            jsCall, {fcn:salvaStatus, params:['inicioDesenvolvimento']},
            scene, "escritorio.jpg",
            personagem, {image: "personagem.png", position:rightSide},
            outro, {image: "cliente.png", position: leftSide},
            personagem, "Estamos indo muito bem, o projeto está bem adiantado! Agora vamos começar o Desenvolvimento do Sistema.",
            outro, "Quais Ferramentas usaremos para esse projeto? ",
            personagem, {image: "personagem_pensando.png", position:rightSide},
            personagem, "Acho melhor criar um documento com possíveis Ferramentas e Linguagens para o Desenvolvimento.",
            personagem, {image: "personagem.png", position:rightSide},
            personagem, "Crie este documento e disponibilize no sistema para que eu possa definir as ferramentas e a Linguagem",
            outro, "Muito bem vou fazer uma listagem minha e passar para você definir",
            jump, "pergunta3",

            label, "pergunta3",
            jsCall, {fcn:salvaStatus, params:['pergunta3']},
            scene,{image: "escritorio.jpg", effect: "fade"},
            narrator, "Depois de algum tempo, você recebeu o arquivo, agora cabe a você analisar e decidir quais ferramentas usar e qual Linguagem ",
            scene,{image: "docescolha.png", effect: "dissolve"},
            narrator, "Analise bem as ferramentas e Linguagens que cada um tem conhecimento e acham que deveria ser usada no projeto.",
            scene,"escritorio.jpg",
            menu, [
                "Agora decida quais ferramentas e linguagens são mais apropriadas para este projeto?",
                "Visual Studio, PostGreSql, Git, Visual Basic", [ setVars, { perg3: "resp1" },
                    jump, "Desenvolvimento"],
                "Visual Studio, PostGreSql, Svn, C#", [ setVars, { perg3: "resp2" },
                    jump, "Desenvolvimento"],
                "NetBeans, SqlServer, Git, Java, JavaFX", [ setVars, { perg3: "resp3" },
                    jump, "Desenvolvimento"],
                "Visual Studio, C++, PostGreSql", [ setVars, { perg3: "resp4" },
                    jump, "Desenvolvimento"],     
            ],

            label, "Desenvolvimento",
            jsCall, {fcn:salvaStatus, params:['Desenvolvimento']},
            scene, "escritorio.jpg",
            personagem, {image: "personagem.png", position:rightSide},
            outro, {image: "cliente.png", position: leftSide},
            personagem, "Pronto nosso ambiente de desenvolvimento está pronto!",
            outro, "Agora é hora do show",
            personagem, "Enquanto você cria os layouts, eu irei iniciar o desenvolvimento das classes de controle da nossa base de dados",
            outro,{image:"cliente_feliz.png", position: leftSide},
            outro, "Muito bem.Já iree fazer os primeiros rascunhos.",
            scene,{image: "escritorio.jpg", effect: "dissolve"}, 
            narrator, "Já faz alguns dias desde que o desenvolvimento começou, vocês estão preparando tudo para garantir que a versão alfa seja entregue a tempo.",
            personagem, {image: "personagem.png", position:rightSide},
            outro, {image: "cliente.png", position: leftSide},
            personagem, "Muito bem, estamos quase pronto de terminar a versão alfa, mas antes precisamos realizar alguns testes",
            outro, "Preparei alguns casos de testes para usarmos, mas precisamos defenir qual melhor forma de realizar esses testes.",
            jump, "pergunta4",

            label, "pergunta4",
            jsCall, {fcn:salvaStatus, params:['pergunta4']},
            scene,{image: "escritorio.jpg", effect: "fade"},
            menu, [
                "Conhecendo a natureza do projeto, quais tecnicas de teste de software deve ser usada?",
                "Teste de Caixa Preta, Teste de Caixa Branca, Teste de Usabilidade ", [ setVars, { perg4: "resp1" },
                    jump, "posteste"],
                "Teste de caixa preta, Teste de Regressão, Teste de Carga ", [ setVars, { perg4: "resp2" },
                    jump, "posteste"],
                "Teste de Caixa Branca, Teste de Estresse, Teste de Segurança ", [ setVars, { perg4: "resp3" },
                    jump, "posteste"],
                "Teste de Caixa Preta, Teste de Usabilidade", [ setVars, { perg4: "resp4" },
                    jump, "posteste"],     
            ],

            label, "posteste",
            jsCall, {fcn:contabiliza, params:['perg4',"novel.userVar.perg4"]},
            jsCall, {fcn:salvaStatus, params:['posteste']},
            scene, "escritorio.jpg",
            personagem, {image: "personagem.png", position:rightSide},
            outro, {image: "cliente.png", position: leftSide},
            personagem, "Pronto nosso ambiente de desenvolvimento está pronto!",
            outro, "Agora é hora do show",
            personagem, "Enquanto você cria os layouts, eu irei iniciar o desenvolvimento das classes de controle da nossa base de dados",
            outro,{image:"cliente_feliz.png", position: leftSide},
            outro, "Muito bem.Já iree fazer os primeiros rascunhos.",
            jsCall, {fcn:salvaPontos, params:[]},
            jsCall, {fcn:salvaDados, params:[]}
        ];
    }

    function salvaStatus(parte){
        localStorage.setItem("parte",parte);
    }

    function salvaPontos(){
        //funcao para salvar usando HTML5 LocalStorage
         localStorage.setItem("pontos",[pontos_requisitos,pontos_projeto,pontos_implementacao,pontos_teste,pontos_manutencao]);
    }

    function contabiliza(perg, resp){
        console.log(perg);
        console.log(resp);
        if(perg == "perg1"){
            if(resp == "resp1"){
                pontos_requisitos+= 2;
                pontos_projeto+= 2;
                pontos_manutencao+= 1;
            }else if(resp == "resp2"){
                pontos_requisitos+= 2;
                pontos_projeto+= 2;
                pontos_manutencao+= 1;
            }else if(resp == "resp3"){
                pontos_requisitos+= 4;
                pontos_projeto+= 4;
                pontos_manutencao+= 2;
            }else if(resp == "resp4"){
                pontos_requisitos+= 10;
                pontos_projeto+= 10;
                pontos_manutencao+= 5;
            }
        }else if(perg == "perg2"){
            if(resp == "resp1"){
                pontos_requisitos = 2;
                pontos_projeto = 2;
                pontos_implementacao = 2;
                pontos_manutencao = 1;
            }else if(resp == "resp2"){
                pontos_requisitos = 2;
                pontos_projeto = 2;
                pontos_implementacao = 2;
                pontos_manutencao = 1;
            }else if(resp == "resp3"){
                pontos_requisitos = 10;
                pontos_projeto = 10;
                pontos_implementacao = 10;
                pontos_manutencao = 5;
            }else if(resp == "resp4"){
                pontos_requisitos = 2;
                pontos_projeto = 2;
                pontos_implementacao = 2;
                pontos_manutencao = 1;
            }
        }else if(perg == "perg3"){
            if(resp == "resp1"){
                pontos_requisitos = 5;
                pontos_projeto = 5;
                pontos_implementacao = 5;
                pontos_teste = 2;
                pontos_manutencao = 2;
            }else if(resp == "resp2"){
                pontos_requisitos = 10;
                pontos_projeto = 10;
                pontos_implementacao = 10;
                pontos_teste = 5;
                pontos_manutencao = 5;
            }else if(resp == "resp3"){
                pontos_requisitos = 10;
                pontos_projeto = 10;
                pontos_implementacao = 10;
                pontos_teste = 5;
                pontos_manutencao = 5;
            }else if(resp == "resp4"){
                pontos_requisitos = 5;
                pontos_projeto = 5;
                pontos_implementacao = 5;
                pontos_teste = 2;
                pontos_manutencao = 2;
            }
        }else if(perg == "perg4"){
            if(resp == "resp1"){
                pontos_projeto = 5;
                pontos_implementacao = 5;
                pontos_teste = 10;
                pontos_manutencao = 2;
            }else if(resp == "resp2"){
                pontos_projeto = 2;
                pontos_implementacao = 2;
                pontos_teste = 5;
                pontos_manutencao = 1;
            }else if(resp == "resp3"){
                pontos_projeto = 5;
                pontos_implementacao = 5;
                pontos_teste = 10;
                pontos_manutencao = 5;
            }else if(resp == "resp4"){
                pontos_projeto = 5;
                pontos_implementacao = 5;
                pontos_teste = 10;
                pontos_manutencao = 5;
            }
        }
    }

    function carregaDados(){
        p = localStorage.getItem("parte");
       /* if (p) {
            carregaDados2();
        };*/
    }

    function carregaDados2(){
        nome = localStorage.getItem("nome");
        curso = localStorage.getItem("curso");
        email = localStorage.getItem("email");
        codprof = localStorage.getItem("codprof");
        $("#cadastro").toggle();
        alert("Vai começar");
        initNovel(800, 450);
    }

    function enviar(){
        nome = document.getElementById("txtnome").value;
        curso = document.getElementById("cbcurso").value;
        email = document.getElementById("txtemail").value;
        codigo_prof = document.getElementById("txtcodprof").value;

        localStorage.setItem("nome",nome);
        localStorage.setItem("curso",curso);
        localStorage.setItem("email",email);
        localStorage.setItem("codprof",codigo_prof);
        
        alert("Vai começar");
        initNovel(800, 450);
    }


    function salvaDados(){

        $.ajax({
            url: "https://docs.google.com/forms/d/1T5-Uf-BuauI0Nsdf6di3ysD-RV0cUZ9kAvwivomCZKc/formResponse",
            data: { "entry.199778964": nome,
            "entry.2099589144": email,
            "entry.1015345309": codigo_prof,
            "entry.164103436": curso,
            "entry.507279025":  pontos_requisitos,
            "entry.1773465728": pontos_projeto,
            "entry.729279065": pontos_implementacao,
            "entry.496732154": pontos_teste,
            "entry.1765170312": pontos_manutencao,
            "entry.230375794": "nada"
             },
            type: "POST",
            statusCode: {
                0: function () {
                    alert("Fim de Jogo!");
                    window.location.replace("GraficoDesempenho.html");
                },
                200: function () {
                    window.location.replace("GraficoDesempenho.html");
                }
            }
        });
    }

   $(document).ready(function(){
      $("#cadaAluno").submit(function(){
        return false; 
      });

       $("#btnenviar").click(function(){
        enviar();
        $("#cadastro").toggle();
      });
    });

    // ]]>
    </script>
</head>
<body onload="carregaDados();" onUnload="saveData();" style="background-color:#C4C0C3">
    <script src="js/bootstrap.min.js"></script><br><br>
    <div class"container-fluid">
        <div class="row">
            <div class="col-md-12">
                <nav class="navbar navbar-default navbar-fixed-top" role="navigation" style=" padding: 5px; background-color:#2B2A2B" id="cadastro">
                    <form class="navbar-form" id="cadaAluno">
                        <div class="form-group">
                            <input type="text" name="nome" id="txtnome" class="form-control" placeholder="Nome" >
                            <input type="text" name="email" id="txtemail" class="form-control" placeholder="Email">
                            <input type="text" name="nome" id="txtcodprof" class="form-control" placeholder="Código Professor">
                            <select id="cbcurso" class="form-control">
                                <option value="ADS">Análise e desenvolvimento de sistemas</option>
                                <option value="BD">Banco de dados</option>
                            </select>
                        </div>
                        <button  class="btn btn-default" type="submit" style="width:8%" id="btnenviar">Iniciar</button>
                    </form>
                </nav>
            </div><br><br>
        </div>
    </div><br><br>
    <div id="debug"></div>
    <div id="novelDiv">
        <div style="position: absolute; left:0; top: 0; z-index:-1">
            <img id="background0" src="img/abertura2.jpg"/>
        </div>
        <div style="position: absolute; left:0; top: 0; z-index:-1">
            <img id="background1" src="img/abertura2.jpg"/>
        </div>
    </div>
    <div id="dialogDiv"></div>
    <br><br><br>
</body>
</html>
